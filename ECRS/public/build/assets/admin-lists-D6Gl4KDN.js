$(document).ready(function(){$("#add-program-btn").on("click",function(){$("#add-program-modal").show(),$("body").addClass("no-scroll")}),$("#close-btn-add-program").on("click",function(){$("#add-program-modal").fadeOut(),$("body").removeClass("no-scroll")}),$("#add-program-list-btn").on("click",function(){$("#add-program-list-modal").show(),$("body").addClass("no-scroll")}),$("#close-btn-add-program-list").on("click",function(){$("#add-program-list-modal").fadeOut(),$("body").removeClass("no-scroll")}),$("#add-course-btn").on("click",function(){$("#add-course-modal").show(),$("body").addClass("no-scroll")}),$("#close-btn-add-course").on("click",function(){$("#add-course-modal").fadeOut(),$("body").removeClass("no-scroll")}),$("#add-course-list-btn").on("click",function(){$("#add-course-list-modal").show(),$("body").addClass("no-scroll")}),$("#close-btn-add-course-list").on("click",function(){$("#add-course-list-modal").fadeOut(),$("body").removeClass("no-scroll")});const n=document.querySelector("#prgTable");if(n){const s=$(n).DataTable({processing:!0,serverSide:!0,ajax:{url:"/get-admin-program"},type:"GET",dataType:"json",columns:[{data:"programCode"},{data:"programTitle"},{data:null,render:function(t,o,e){return`
                             <div class="flex justify-center items-center">
                                        <div class="relative group flex justify-center items-center">
                                            <div class="flex justify-center items-center ">
                                                <i class="fa-solid fa-pen-to-square text-green-500 text-xl dark:hover:bg-[#161616] p-[5px] hover:rounded-md cursor-pointer edit-program-btn"
                                                    data-programcode="${e.programCode}"
                                                    data-programtitle="${e.programTitle}"
                                                    data-programid="${e.programID}"
                                                   >
                                                </i>
                                            </div>
                                            <div
                                class="absolute top-[-65px] left-1/2 transform hidden group-hover:block -translate-x-1/2">
                                <div
                                    class="flex justify-center items-center text-center transition-all duration-300 relative">
                                    <span class="p-2 text-sm text-white bg-[#404040] shadow-lg rounded-md">Edit Info</span>
                                    <div
                                        class="absolute bottom-[-8px] left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-8 border-r-8 border-t-8 border-transparent border-t-[#404040]">
                                    </div>
                                </div>
                            </div>
                                        </div>
                                    </div>
                        `}}],responsive:!0,pagingType:"simple",paging:!0,pageLength:10,lengthMenu:[10,25,50],order:[],columnDefs:[{targets:2,orderable:!1}]});$("#add-program-form").on("submit",function(t){t.preventDefault();const o=new FormData(this);$.ajax({url:"/save-program-info",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",data:o,contentType:!1,processData:!1,success:function(e){e.success?Swal.fire({title:"Success!",text:e.message,icon:"success",confirmButtonText:"OK"}).then(r=>{r.isConfirmed&&(s.ajax.reload(),$("#add-program-form")[0].reset(),$("#add-program-modal").fadeOut(),$("body").removeClass("no-scroll"))}):Swal.fire({title:"Error!",text:e.message,icon:"error",confirmButtonText:"OK"})},error:function(e,r,a){Swal.fire({title:"Error!",text:"An error occurred: "+a,icon:"error",confirmButtonText:"OK"})}})}),$(document).on("submit","#add-program-list-form",function(t){t.preventDefault(),$("#loader-modal-import").removeClass("hidden"),$("body").addClass("no-scroll");var o=new FormData(this);$.ajax({url:"/import-programs",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",data:o,contentType:!1,processData:!1,success:function(e){Swal.fire({title:"Success!",text:e.message,icon:"success",confirmButtonText:"OK"}).then(r=>{r.isConfirmed&&($("#add-program-list-form")[0].reset(),$("#add-program-list-modal").fadeOut(),$("body").removeClass("no-scroll"),s.ajax.reload())})},error:function(e,r,a){Swal.fire({title:"Error!",text:"An error occurred: "+a,icon:"error",confirmButtonText:"OK"})},complete:function(){$("#loader-modal-import").addClass("hidden"),$("body").removeClass("no-scroll")}})}),$(document).on("click",".edit-program-btn",function(){const t=$(this).data();$("#edit-programID").val(t.programid),$("#edit-programCode").val(t.programcode),$("#edit-programTitle").val(t.programtitle),$("#edit-program-modal").show(),$("body").addClass("no-scroll")}),$("#close-btn-edit-program").on("click",function(){$("#edit-program-modal").fadeOut(),$("body").removeClass("no-scroll")}),$("#edit-program-form").on("submit",function(t){t.preventDefault();const o={programID:$("#edit-programID").val(),programCode:$("#edit-programCode").val(),programTitle:$("#edit-programTitle").val(),_token:$('meta[name="csrf-token"]').attr("content")};$.ajax({url:"/update-program",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"PUT",data:o,success:function(e){e.success?Swal.fire({title:"Success!",text:e.message,icon:"success",confirmButtonText:"OK"}).then(r=>{r.isConfirmed&&(s.ajax.reload(),$("#edit-program-modal").fadeOut(),$("body").removeClass("no-scroll"))}):Swal.fire({title:"Error!",text:e.message,icon:"error",confirmButtonText:"OK"})},error:function(e,r,a){Swal.fire({title:"Error!",text:"An error occurred: "+a,icon:"error",confirmButtonText:"OK"})}})})}const d=document.querySelector("#crsTable");if(d){const s=$(d).DataTable({processing:!0,serverSide:!0,ajax:{url:"/get-admin-course"},type:"GET",dataType:"json",columns:[{data:"courseCode"},{data:"courseTitle"},{data:"programCode"},{data:null,render:function(t,o,e){return`
                            <div class="flex justify-center items-center">
                                            <div class="relative group flex justify-center items-center">
                                                <div class="flex justify-center items-center ">
                                                    <i class="fa-solid fa-pen-to-square text-green-500 text-xl edit-button dark:hover:bg-[#161616] p-[5px] hover:rounded-md cursor-pointer  edit-course-btn"
                                                        data-course-id="${e.courseID}"
                                                        data-course-code="${e.courseCode}"
                                                        data-course-title="${e.courseTitle}"
                                                         data-program-id="${e.programID}"
                                                        data-program-code="${e.programCode}"></i>
                                                </div>
                                               <div
                                class="absolute top-[-65px] left-1/2 transform hidden group-hover:block -translate-x-1/2">
                                <div
                                    class="flex justify-center items-center text-center transition-all duration-300 relative">
                                    <span class="p-2 text-sm text-white bg-[#404040] shadow-lg rounded-md">Edit Info</span>
                                    <div
                                        class="absolute bottom-[-8px] left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-8 border-r-8 border-t-8 border-transparent border-t-[#404040]">
                                    </div>
                                </div>
                            </div>
                                            </div>
                                        </div>
                        `}}],responsive:!0,pagingType:"simple",paging:!0,order:[],pageLength:10,lengthMenu:[10,25,50],columnDefs:[{targets:3,orderable:!1}]});$("#add-course-form").on("submit",function(t){t.preventDefault();const o=new FormData(this);$.ajax({url:"/save-course-info",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",data:o,contentType:!1,processData:!1,success:function(e){e.success?Swal.fire({title:"Success!",text:e.message,icon:"success",confirmButtonText:"OK"}).then(r=>{r.isConfirmed&&(s.ajax.reload(),$("body").removeClass("no-scroll"),$("#add-course-form")[0].reset(),$("#add-course-modal").fadeOut())}):Swal.fire({title:"Error!",text:e.message,icon:"error",confirmButtonText:"OK"})},error:function(e,r,a){Swal.fire({title:"Error!",text:"An error occurred: "+a,icon:"error",confirmButtonText:"OK"})}})}),$(document).on("submit","#add-course-list-form",function(t){t.preventDefault(),$("#loader-modal-import").removeClass("hidden"),$("body").addClass("no-scroll");var o=new FormData(this);$.ajax({url:"/import-courses",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",data:o,contentType:!1,processData:!1,success:function(e){Swal.fire({title:"Success!",text:e.message,icon:"success",confirmButtonText:"OK"}).then(r=>{r.isConfirmed&&($("#add-course-list-form")[0].reset(),$("#add-course-list-modal").fadeOut(),s.ajax.reload(),$("body").removeClass("no-scroll"))})},error:function(e,r,a){Swal.fire({title:"Error!",text:"An error occurred: "+a,icon:"error",confirmButtonText:"OK"})},complete:function(){$("#loader-modal-import").addClass("hidden"),$("body").removeClass("no-scroll")}})}),$(document).on("click",".edit-course-btn",function(){const t=$(this).data("course-id"),o=$(this).data("course-code"),e=$(this).data("course-title"),r=$(this).data("program-id");$("#edit-courseID").val(t),$("#edit-courseCode").val(o),$("#edit-courseTitle").val(e),$("#edit-programCodeCourse").val(r),$("#edit-course-modal").show(),$("body").addClass("no-scroll")}),$("#edit-course-form").on("submit",function(t){t.preventDefault();const o={courseID:$("#edit-courseID").val(),courseCode:$("#edit-courseCode").val(),courseTitle:$("#edit-courseTitle").val(),programID:$("#edit-programCodeCourse").val(),_token:$('meta[name="csrf-token"]').attr("content")};$.ajax({url:"/update-course",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"PUT",data:o,success:function(e){e.success?Swal.fire({title:"Success!",text:e.message,icon:"success",confirmButtonText:"OK"}).then(r=>{r.isConfirmed&&(s.ajax.reload(),$("#edit-course-modal").fadeOut(),$("body").removeClass("no-scroll"))}):Swal.fire({title:"Error!",text:e.message,icon:"error",confirmButtonText:"OK"})},error:function(e,r,a){Swal.fire({title:"Error!",text:"An error occurred: "+a,icon:"error",confirmButtonText:"OK"})}})})}$("#close-btn-edit-course").on("click",function(){$("#edit-course-modal").fadeOut(),$("body").removeClass("no-scroll")})});
