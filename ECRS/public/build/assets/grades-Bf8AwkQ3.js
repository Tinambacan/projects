$(document).ready(function(){function a(){let e=0;return $("tbody tr").each(function(){let t=$(this).find(".percentage-input").val();t&&(e+=parseFloat(t))}),$("tr.total-row td.total-percentage").text(e+"%"),e>100?(Swal.fire({title:"Invalid Total",text:"Total percentage cannot exceed 100%.",icon:"warning",button:"OK"}),!1):e===100}$(".percentage-input").on("input",function(){a()}),$("#save-btn").on("click",function(){let e=[];if(!a()){Swal.fire({title:"Invalid Total",text:"Total percentage must equal 100% to proceed.",icon:"warning",button:"OK"});return}$("tbody tr").each(function(){let t=$(this).data("grading-id"),r=$(this).find(".percentage-input").val();e.push({gradingID:t,percentage:r})}),$.ajax({url:"/update-grading-percentages",type:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{gradingData:e},success:function(t){Swal.fire({title:"Success",text:"Percentages updated successfully!",icon:"success",button:"OK"}).then(()=>{location.reload()})},error:function(t){console.log(t),Swal.fire({title:"Error",text:"Error updating percentages. Please try again.",icon:"error",button:"OK"})}})})});$(document).ready(function(){$(".grade-percentage-btn").on("click",function(){$(".card").toggleClass("open"),$(".arrow-icon").toggleClass("arrow-left arrow-right")}),$(".close-card-icon").on("click",function(){$(this).closest(".card").removeClass("open")})});$(document).ready(function(){$(".toggle-grade-btn").on("click",function(){let a=$(this).data("term"),e=$(this).data("class-record-id"),t=$(this).data("is-published"),r=$(this).data("grading-type"),i=t?"Unpublish":"Publish";Swal.fire({title:"Confirmation",text:`${i} ${r} grades?`,icon:"warning",showCancelButton:!0,confirmButtonColor:t?"#d33":"#3085d6",cancelButtonColor:"#6c757d",confirmButtonText:"Yes"}).then(c=>{c.isConfirmed&&$.ajax({url:"/toggle-grades",type:"POST",data:{_token:$('meta[name="csrf-token"]').attr("content"),term:a,classRecordID:e,isPublished:t?0:1},success:function(n){n.success?Swal.fire({title:"Success",text:n.message,icon:"success",confirmButtonText:"OK"}).then(()=>{location.reload()}):Swal.fire({title:"Action Failed",text:n.message,icon:"error",confirmButtonText:"OK"})},error:function(n){var o;Swal.fire({title:"Error!",text:((o=n.responseJSON)==null?void 0:o.message)||"An unexpected error occurred.",icon:"error",confirmButtonText:"OK"})}})})})});
