$(document).ready(function(){$(".toggle-password").click(function(){$(this).toggleClass("fa-eye fa-eye-slash");var e=$($(this).attr("toggle"));e.attr("type")=="password"?e.attr("type","text"):e.attr("type","password")});function c(e){const r=e.length>=8,s=/[A-Z]/.test(e),a=/[!@#$%^&*(),.?":{}|<>]/.test(e),t=/\d/.test(e);return r?$("#length-requirement").css("color","green"):$("#length-requirement").css("color","red"),s?$("#uppercase-requirement").css("color","green"):$("#uppercase-requirement").css("color","red"),a?$("#special-char-requirement").css("color","green"):$("#special-char-requirement").css("color","red"),t?$("#number-requirement").css("color","green"):$("#number-requirement").css("color","red"),r&&s&&a&&t}$("#new-password").on("input",function(){const e=$(this).val();c(e)});const l=$("#email").val(),i=$("#role").val();let o,n;i==1?(o=$("#set-new-temp-pass-btn"),n="/faculty/reset-temp-password"):i==2?(o=$("#set-new-temp-pass-btn-ad"),n="/admin/reset-temp-password"):(o=$("#set-new-temp-pass-btn-st"),n="/student/reset-temp-password"),o.on("click",function(e){e.preventDefault();var r=$(this).closest("form")[0];const s=$("#new-password").val(),a=$("#confirm-password").val();if(s!==a){Swal.fire({icon:"error",title:"Passwords do not match",text:"Please make sure the passwords are the same."});return}if(!c(s)){Swal.fire({icon:"error",title:"Invalid Password",text:"Password must be at least 8 characters long, contain one uppercase letter, one number, and one special character."});return}$.ajax({url:n,type:"POST",data:{_token:$("input[name=_token]").val(),email:l,newPassword:s,confirmPassword:a,role:i},success:function(t){t.success?Swal.fire({icon:"success",title:"Success!",text:t.message,confirmButtonText:"OK"}).then(u=>{u.isConfirmed&&(r.reset(),setTimeout(()=>{window.location.href=t.redirect},1e3))}):(Swal.fire({icon:"error",title:"Error",text:t.message||"There was an error updating the password."}),r.reset())},error:function(t){Swal.fire({icon:"error",title:"Error",text:"An error occurred while updating your password. Please try again."}),r.reset()}})})});
