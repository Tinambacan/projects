$(document).ready(function(){$("#add-branch-btn").on("click",function(){$("#add-branch-modal").show(),$("body").addClass("no-scroll")}),$("#close-btn-add-branch").on("click",function(){$("#add-branch-modal").fadeOut(),$("body").removeClass("no-scroll")}),$("#add-branch-list-btn").on("click",function(){$("#add-branch-list-modal").show(),$("body").addClass("no-scroll")}),$("#close-btn-add-branch-list").on("click",function(){$("#add-branch-list-modal").fadeOut(),$("body").removeClass("no-scroll")});const c=document.querySelector("#myTable");if(c){const a=$(c).DataTable({processing:!0,serverSide:!0,ajax:{url:"/get-branches-sa",type:"GET",dataType:"json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}},columns:[{data:null,render:function(t,r,e){return`<div class="text-center">${e.id}</div>`}},{data:null,render:function(t,r,e){return`<div class="text-center">${e.branchDescription}</div>`}},{data:null,render:function(t,r,e){return`
                             <div class="flex justify-center items-center">
                                        <div class="relative group flex justify-center items-center">
                                            <div class="flex justify-center items-center ">
                                                <i class="fa-solid fa-pen-to-square text-green-500 text-xl hover:bg-gray-200 hover:rounded-md cursor-pointer p-1 edit-branch-btn"
                                                    data-branchDescription="${e.branchDescription}"
                                                    data-branchid="${e.id}"
                                                   >
                                                </i>
                                            </div>
                                             <div class="absolute top-[-65px] left-1/2 transform hidden group-hover:block -translate-x-1/2">
                                         <div class="flex justify-center items-center text-center transition-all duration-300 relative">
                                             <span class="p-2 text-sm text-white bg-[#404040] shadow-lg rounded-md">View Info</span>
                                             <div class="absolute bottom-[-8px] left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-8 border-r-8 border-t-8 border-transparent border-t-[#404040]"></div>
                                         </div>
                                     </div>
                                        </div>
                                    </div>
                        `}}],responsive:!0,pagingType:"simple",paging:!0,order:[],columnDefs:[{targets:[2],orderable:!1}]});$("#add-branch-form").on("submit",function(t){t.preventDefault();const r=new FormData(this);$.ajax({url:"/save-branch-info",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",data:r,contentType:!1,processData:!1,success:function(e){e.success?Swal.fire({title:"Success!",text:e.message,icon:"success",confirmButtonText:"OK"}).then(n=>{n.isConfirmed&&(a.ajax.reload(),$("#add-branch-form")[0].reset(),$("#add-branch-modal").fadeOut(),$("body").removeClass("no-scroll"))}):Swal.fire({title:"Error!",text:e.message,icon:"error",confirmButtonText:"OK"})},error:function(e,n,o){Swal.fire({title:"Error!",text:"An error occurred: "+o,icon:"error",confirmButtonText:"OK"})}})}),$("#edit-branch-form").on("submit",function(t){t.preventDefault();const r={branchID:$("#edit-branchID").val(),branchDescription:$("#edit-branchDescription").val(),_token:$('meta[name="csrf-token"]').attr("content")};$.ajax({url:"/update-branch",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"PUT",data:r,success:function(e){e.success?Swal.fire({title:"Success!",text:e.message,icon:"success",confirmButtonText:"OK"}).then(n=>{n.isConfirmed&&(a.ajax.reload(),$("#edit-branch-modal").fadeOut(),$("body").removeClass("no-scroll"))}):Swal.fire({title:"Error!",text:e.message,icon:"error",confirmButtonText:"OK"})},error:function(e,n,o){Swal.fire({title:"Error!",text:"An error occurred: "+o,icon:"error",confirmButtonText:"OK"})}})})}$(document).on("click",".edit-branch-btn",function(){const a=$(this).data();$("#edit-branchID").val(a.branchid),$("#edit-branchDescription").val(a.branchdescription),$("#edit-branch-modal").show(),$("body").addClass("no-scroll")}),$("#close-btn-edit-branch").on("click",function(){$("#edit-branch-modal").fadeOut(),$("body").removeClass("no-scroll")})});
