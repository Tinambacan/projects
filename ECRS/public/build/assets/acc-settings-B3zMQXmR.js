$(document).ready(function(){$(".toggle-password").click(function(){$(this).toggleClass("fa-eye fa-eye-slash");var s=$($(this).attr("toggle"));s.attr("type")=="password"?s.attr("type","text"):s.attr("type","password")});function c(s){const i=s.length>=8,t=/[A-Z]/.test(s),n=/[!@#$%^&*(),.?":{}|<>]/.test(s),r=/\d/.test(s);return $("#length-requirement").css("color",i?"green":"red"),$("#uppercase-requirement").css("color",t?"green":"red"),$("#special-char-requirement").css("color",n?"green":"red"),$("#number-requirement").css("color",r?"green":"red"),i&&t&&n&&r}$(document).ready(function(){const s=$("#new-password"),i=$("#ad-new-password"),t=$("#sa-new-password"),n=$("#st-new-password");s.on("input",function(){const r=$(this).val();c(r)}),i.on("input",function(){const r=$(this).val();c(r)}),t.on("input",function(){const r=$(this).val();c(r)}),n.on("input",function(){const r=$(this).val();c(r)})}),$("#fa-update-btn").on("click",function(s){s.preventDefault();const i=$("#current-password").val(),t=$("#new-password").val(),n=$("#confirm-password").val(),r=$("#loginID").val();if(t!==n){Swal.fire({icon:"error",title:"Error",text:"New Password and Confirm Password do not match."});return}if(!c(t)){Swal.fire({icon:"error",title:"Invalid Password",text:"Password must be at least 8 characters long, contain one uppercase letter, one number, and one special character."});return}var o=$(this).closest("form")[0];$.ajax({url:"update-password",method:"POST",data:{_token:$('input[name="_token"]').val(),loginID:r,currentPassword:i,newPassword:t,confirmPassword:n},success:function(e){e.success?Swal.fire({icon:"success",title:"Password Updated",text:e.message,timer:2e3,showConfirmButton:!1}).then(()=>{Swal.fire({icon:"question",title:"Do you want to keep logged in?",showCancelButton:!0,confirmButtonText:"Yes, stay logged in",cancelButtonText:"No, log me out"}).then(a=>{a.isConfirmed?o.reset():window.location.href="/logout"})}):(o.reset(),Swal.fire({icon:"error",title:"Error",text:e.message}))},error:function(e){if(o.reset(),e.status===422){let a=e.responseJSON.errors,l="";for(let d in a)l+=a[d].join(", ")+`
`;Swal.fire({icon:"error",title:"Validation Error",text:l})}else Swal.fire({icon:"error",title:"Error",text:"Something went wrong. Please try again."})}})}),$("#st-update-btn").on("click",function(s){s.preventDefault();const i=$("#st-current-password").val(),t=$("#st-new-password").val(),n=$("#st-confirm-password").val(),r=$("#st-loginID").val();if(t!==n){Swal.fire({icon:"error",title:"Error",text:"New Password and Confirm Password do not match."});return}if(!c(t)){Swal.fire({icon:"error",title:"Invalid Password",text:"Password must be at least 8 characters long, contain one uppercase letter, one number, and one special character."});return}var o=$(this).closest("form")[0];$.ajax({url:"update-password",method:"POST",data:{_token:$('input[name="_token"]').val(),loginID:r,currentPassword:i,newPassword:t,confirmPassword:n},success:function(e){e.success?Swal.fire({icon:"success",title:"Password Updated",text:e.message,timer:2e3,showConfirmButton:!1}).then(()=>{Swal.fire({icon:"question",title:"Do you want to keep logged in?",showCancelButton:!0,confirmButtonText:"Yes, stay logged in",cancelButtonText:"No, log me out"}).then(a=>{a.isConfirmed?o.reset():window.location.href="/logout"})}):(o.reset(),Swal.fire({icon:"error",title:"Error",text:e.message}))},error:function(e){if(o.reset(),e.status===422){let a=e.responseJSON.errors,l="";for(let d in a)l+=a[d].join(", ")+`
`;Swal.fire({icon:"error",title:"Validation Error",text:l})}else Swal.fire({icon:"error",title:"Error",text:"Something went wrong. Please try again."})}})}),$("#ad-update-btn").on("click",function(s){s.preventDefault();const i=$("#ad-current-password").val(),t=$("#ad-new-password").val(),n=$("#ad-confirm-password").val(),r=$("#ad-loginID").val();if(t!==n){Swal.fire({icon:"error",title:"Error",text:"New Password and Confirm Password do not match."});return}if(!c(t)){Swal.fire({icon:"error",title:"Invalid Password",text:"Password must be at least 8 characters long, contain one uppercase letter, one number, and one special character."});return}var o=$(this).closest("form")[0];$.ajax({url:"update-password",method:"POST",data:{_token:$('input[name="_token"]').val(),loginID:r,currentPassword:i,newPassword:t,confirmPassword:n},success:function(e){e.success?Swal.fire({icon:"success",title:"Password Updated",text:e.message,timer:2e3,showConfirmButton:!1}).then(()=>{Swal.fire({icon:"question",title:"Do you want to keep logged in?",showCancelButton:!0,confirmButtonText:"Yes, stay logged in",cancelButtonText:"No, log me out"}).then(a=>{a.isConfirmed?o.reset():window.location.href="/logout"})}):(o.reset(),Swal.fire({icon:"error",title:"Error",text:e.message}))},error:function(e){if(o.reset(),e.status===422){let a=e.responseJSON.errors,l="";for(let d in a)l+=a[d].join(", ")+`
`;Swal.fire({icon:"error",title:"Validation Error",text:l})}else Swal.fire({icon:"error",title:"Error",text:"Something went wrong. Please try again."})}})}),$("#sa-update-btn").on("click",function(s){s.preventDefault();const i=$("#sa-current-password").val(),t=$("#sa-new-password").val(),n=$("#sa-confirm-password").val(),r=$("#sa-loginID").val();if(t!==n){Swal.fire({icon:"error",title:"Error",text:"New Password and Confirm Password do not match."});return}if(!c(t)){Swal.fire({icon:"error",title:"Invalid Password",text:"Password must be at least 8 characters long, contain one uppercase letter, one number, and one special character."});return}var o=$(this).closest("form")[0];$.ajax({url:"update-password",method:"POST",data:{_token:$('input[name="_token"]').val(),loginID:r,currentPassword:i,newPassword:t,confirmPassword:n},success:function(e){e.success?Swal.fire({icon:"success",title:"Password Updated",text:e.message,timer:2e3,showConfirmButton:!1}).then(()=>{Swal.fire({icon:"question",title:"Do you want to keep logged in?",showCancelButton:!0,confirmButtonText:"Yes, stay logged in",cancelButtonText:"No, log me out"}).then(a=>{a.isConfirmed?o.reset():window.location.href="/logout"})}):(o.reset(),Swal.fire({icon:"error",title:"Error",text:e.message}))},error:function(e){if(o.reset(),e.status===422){let a=e.responseJSON.errors,l="";for(let d in a)l+=a[d].join(", ")+`
`;Swal.fire({icon:"error",title:"Validation Error",text:l})}else Swal.fire({icon:"error",title:"Error",text:"Something went wrong. Please try again."})}})})});$(document).ready(function(){$("#save-btn").on("click",function(c){c.preventDefault();var s=$("#registrationID").val(),i=$("#edit-facultyFname").val(),t=$("#edit-facultyMname").val(),n=$("#edit-facultyLname").val(),r=$("#edit-facultySname").val(),o=$("#edit-salutation").val(),e=$("#adminID").val(),a=$("#ad-loginID").val(),l=$("#edit-adminEmail").val();$.ajax({url:"update-personalInfo",method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{registrationID:s,Fname:i,Mname:t,Lname:n,Sname:r,adminID:e,loginID:a,salutation:o,email:l,salutation:o},success:function(d){Swal.fire({icon:"success",title:"Success",text:d.message,timer:2e3,showConfirmButton:!1}).then(()=>{window.location.reload()})},error:function(d){Swal.fire({icon:"error",title:"Error",text:"Something went wrong, please try again."})}})})});document.addEventListener("DOMContentLoaded",function(){$.ajax({url:"/get-school-year",method:"GET",success:function(t){const n=t.schoolYear;$("#edit-semester").val(t.semester),i("edit-schoolYear",n)},error:function(){}});function i(t,n){const r=document.getElementById(t);if(r)for(let o=2023;o<=2050;o++){let e=document.createElement("option");e.value=`${o}-${o+1}`,e.textContent=`${o}-${o+1}`,e.value===n&&(e.selected=!0),r.appendChild(e)}}});document.addEventListener("DOMContentLoaded",function(){document.getElementById("save-schoolSem-btn").addEventListener("click",function(s){s.preventDefault();const i=document.getElementById("adminID").value,t=document.getElementById("edit-schoolYear").value,n=document.getElementById("edit-semester").value;if(!t||!n){alert("Please select both School Year and Semester");return}$.ajax({url:"/update-school-year-semester",method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{adminID:i,schoolYear:t,semester:n},success:function(r){Swal.fire({icon:"success",title:"Success",text:r.message,timer:2e3,showConfirmButton:!1}).then(()=>{window.location.reload()})},error:function(r,o,e){alert("An error occurred while updating the school year and semester.")}})})});
