$(document).ready(function(){$(".step"),$(".step-content");const l=$("#grade-config-back-btn"),c=$("#next-btn"),g=$("#grade-config-next-btn");$("#step-border");let e=1,n=2;const b=$("#grading-period");$("#midterm-grade"),$("#final-grade"),$("#special-grade");function o(){$(".step").each(function(){const s=parseInt($(this).attr("data-step")),t=$(this).find(".step-number");s===e?t.removeClass("bg-gray-300 text-gray-500").addClass("bg-red-900 text-white dark:bg-[#CCAA2C]"):s<e?t.removeClass("bg-gray-300 text-gray-500").addClass("bg-green-500 text-white"):t.removeClass("bg-red-900 text-white dark:bg-[#CCAA2C] bg-green-500").addClass("bg-gray-300 text-gray-500")}),$(".step-content").addClass("hidden"),$(`.step-content[data-step="${e}"]`).removeClass("hidden"),$("#classrecord-information").toggle(e===1),$("#grade-distribution").toggle(e===2),$("#grade-config-back-btn, #grade-config-next-btn").toggle(e>1&&e<n),$("#next-btn").toggle(e===1)}function f(s){const t=$("#stepper");t.empty();for(let r=1;r<=s;r++){const i=`
                <div class="step-container flex items-center">
                    <div class="step z-20" data-step="${r}">
                        <div class="step-number flex justify-center items-center w-8 h-8 rounded-full bg-gray-300 text-gray-500 font-bold transition-all duration-300">${r}</div>
                    </div>
                    ${r<s?'<div class="step-border w-12 h-2 bg-gray-200"></div>':""}
                </div>
            `;t.append(i)}}b.on("change",function(){switch($(this).val()){case"1":n=3;break;case"2":n=4;break;case"3":n=5;break;default:n=2}e=1,f(n),o(),e===2&&$("#grade-distribution").show()});function d(){const s=document.querySelectorAll("#classrecord-information [required]");let t=!0,r=[];s.forEach(a=>{a.value?a.classList.remove("border-red-500"):(t=!1,a.classList.add("border-red-500"),r.push(a.previousElementSibling.textContent.replace("*","").trim()))});const i=document.getElementById("course-select");i.value===""||i.value==="Select Course"?(t=!1,i.classList.add("border-red-500"),r.push("Course")):i.classList.remove("border-red-500"),t&&e<n?(e++,o(),e===2&&$("#grade-distribution").show(),$("#classrecord-information").toggle(e===1),$("#grade-distribution").toggle(e===2),$("#grade-config-back-btn").show(),$("#grade-config-next-btn").show(),e===n&&$("#next-btn").hide()):t||Swal.fire({title:"Incomplete Form",html:`Please fill in the following required fields:<br><br>${r.join("<br>")}`,icon:"warning",confirmButtonText:"OK",confirmButtonColor:"#dc2626"})}c.on("click",d),g.on("click",d),l.on("click",function(){e>1&&(e--,o(),$("#classrecord-information").toggle(e===1),$("#grade-distribution").toggle(e===2),$("#grade-config-back-btn").toggle(e>1),$("#next-btn").show())}),o()});
